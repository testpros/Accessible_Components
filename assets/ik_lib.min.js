var ik_utils=ik_utils||{};ik_utils.keys={tab:9,enter:13,esc:27,space:32,end:35,home:36,left:37,up:38,right:39,down:40},ik_utils.getTransitionEventName=function(){var $elem,events,t,name;$elem=$("<div/>"),events={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in events)void 0!==$elem.css(t)&&(name=events[t]);return name},function($,window,document,undefined){function Plugin(element,options){this._name=pluginName,this._defaults=defaults,this.element=$(element),this.options=$.extend({},defaults,options),this.init()}var pluginName="ik_accordion",defaults={autoCollapse:!1,animationSpeed:200};Plugin.prototype.init=function(){var id,$elem,plugin;id="acc"+$(".ik_accordion").length,$elem=this.element,plugin=this,$elem.attr({id:id,role:"presentation"}).addClass("ik_accordion"),$elem.attr({"aria-multiselectable":!this.options.autoCollapse}),this.headers=$elem.children("dt").attr({role:"heading"}),this.headers.each(function(i,el){var $me,$btn;$me=$(el),$btn=$("<div/>").attr({id:id+"_btn_"+i,role:"button","aria-controls":id+"_panel_"+i,"aria-expanded":!1,tabindex:0}).addClass("button").html($me.html()).on("keydown",{plugin:plugin},plugin.onKeyDown).on("click",{plugin:plugin},plugin.togglePanel),$me.empty().append($btn)}),this.panels=$elem.children("dd").each(function(i,el){var $me=$(this),id=$elem.attr("id")+"_panel_"+i;$me.attr({id:id,role:"region","aria-hidden":!0,tabindex:0})}).hide()},Plugin.prototype.onKeyDown=function(event){var $me,$header,plugin,$elem,ind;switch($me=$(event.target),$header=$me.parent("dt"),plugin=event.data.plugin,$elem=$(plugin.element),event.keyCode){case ik_utils.keys.enter:case ik_utils.keys.space:event.preventDefault(),event.stopPropagation(),plugin.togglePanel(event);break;case ik_utils.keys.up:ind=plugin.headers.index($header),ind>0&&plugin.headers.eq(--ind).find(".button").focus();break;case ik_utils.keys.down:ind=plugin.headers.index($header),ind<plugin.headers.length-1&&plugin.headers.eq(++ind).find(".button").focus()}},Plugin.prototype.togglePanel=function(event){var plugin,$elem,$panel,$me,isVisible;plugin=event.data.plugin,$elem=$(plugin.element),$me=$(event.target),$panel=$me.parent("dt").next(),isVisible=!!$panel.is(":visible"),isVisible?$me.attr({"aria-expanded":!1}).removeClass("expanded"):$me.attr({"aria-expanded":!0}).addClass("expanded"),$panel.slideToggle({duration:plugin.options.animationSpeed,done:function(){$panel.attr({"aria-hidden":isVisible})}}),plugin.options.autoCollapse&&plugin.headers.each(function(i,el){var $hdr,$btn;$hdr=$(el),$btn=$hdr.find(".button"),$btn[0]!=$(event.currentTarget)[0]&&($btn.attr({"aria-expanded":!1}).removeClass("expanded"),$hdr.next().attr({"aria-hidden":"true"}).slideUp(plugin.options.animationSpeed))})},$.fn[pluginName]=function(options){return this.each(function(){$.data(this,pluginName)||$.data(this,pluginName,new Plugin(this,options))})}}(jQuery,window,document),function($,window,document,undefined){function Plugin(element,options){this._name=pluginName,this._defaults=defaults,this.element=$(element),this.options=$.extend({},defaults,options),this.init()}var pluginName="ik_carousel",defaults={instructions:"Carousel widget. Use left and reight arrows to navigate between slides.",animationSpeed:3e3};Plugin.prototype.init=function(){var id,plugin,$elem,$controls,$navbar;plugin=this,id="carousel"+$(".ik_carousel").length,$elem=plugin.element,$elem.attr({id:id,role:"region",tabindex:0,"aria-describedby":id+"_instructions"}).addClass("ik_carousel").on("keydown",{plugin:plugin},plugin.onKeyDown).on("focusin mouseenter",{plugin:plugin},plugin.stopTimer).on("focusout mouseleave",{plugin:plugin},plugin.startTimer),$controls=$("<div/>").attr({"aria-hidden":"true"}).addClass("ik_controls").appendTo($elem),$("<div/>").addClass("ik_button ik_prev").on("click",{plugin:plugin,slide:"left"},plugin.gotoSlide).appendTo($controls),$("<div/>").addClass("ik_button ik_next").on("click",{plugin:plugin,slide:"right"},plugin.gotoSlide).appendTo($controls),$navbar=$("<ul/>").addClass("ik_navbar").appendTo($controls),plugin.slides=$elem.children("figure").each(function(i,el){var $me,$src;$me=$(el),$src=$me.find("img").remove().attr("src"),$me.attr({"aria-hidden":"true"}).css({"background-image":"url("+$src+")"}),$("<li/>").on("click",{plugin:plugin,slide:i},plugin.gotoSlide).appendTo($navbar)}),plugin.navbuttons=$navbar.children("li"),plugin.slides.first().addClass("active"),plugin.navbuttons.first().addClass("active"),$("<div/>").attr({id:id+"_instructions","aria-hidden":"true"}).text(this.options.instructions).addClass("ik_readersonly").appendTo($elem),plugin.startTimer({data:{plugin:plugin}})},Plugin.prototype.startTimer=function(event){var plugin;$elem=$(this),plugin=event.data.plugin,"focusout"===event.type&&plugin.element.removeAttr("aria-live"),plugin.timer&&(clearInterval(plugin.timer),plugin.timer=null),plugin.timer=setInterval(plugin.gotoSlide,plugin.options.animationSpeed,{data:{plugin:plugin,slide:"right"}})},Plugin.prototype.stopTimer=function(event){var plugin=event.data.plugin;"focusin"===event.type&&plugin.element.attr({"aria-live":"polite"}),clearInterval(plugin.timer),plugin.timer=null},Plugin.prototype.gotoSlide=function(event){var plugin,n,$elem,$active,$next,index,direction,transevent;plugin=event.data.plugin,n=event.data.slide,$elem=plugin.element,$active=$elem.children(".active"),index=$active.index(),"string"==typeof n?"left"===n?(direction="left",n=0==index?plugin.slides.length-1:--index):(direction="right",n=index==plugin.slides.length-1?0:++index):direction=n>index||0==index&&n==plugin.slides.length-1?"left":"right",$next=plugin.slides.eq(n).addClass("next"),transevent=ik_utils.getTransitionEventName(),$active.addClass(direction).on(transevent,{next:$next,dir:direction},function(event){var active,next,dir;active=$(this),next=event.data.next,dir=event.data.dir,active.attr({"aria-hidden":"true"}).off(ik_utils.getTransitionEventName()).removeClass(direction+" active"),next.attr({"aria-hidden":"false"}).removeClass("next").addClass("active")}),plugin.navbuttons.removeClass("active").eq(n).addClass("active")},Plugin.prototype.onKeyDown=function(event){var plugin=event.data.plugin;switch(event.keyCode){case ik_utils.keys.left:event.data={plugin:plugin,slide:"left"},plugin.gotoSlide(event);break;case ik_utils.keys.right:event.data={plugin:plugin,slide:"right"},plugin.gotoSlide(event);break;case ik_utils.keys.esc:plugin.element.blur()}},$.fn[pluginName]=function(options){return this.each(function(){$.data(this,pluginName)||$.data(this,pluginName,new Plugin(this,options))})}}(jQuery,window,document),function($,window,document,undefined){function Plugin(element,options){this._name=pluginName,this._defaults=defaults,this.element=$(element),this.options=$.extend({},defaults,options),this.init()}var pluginName="ik_progressbar",defaults={instructions:"Press spacebar, or Enter to get progress",max:100};Plugin.prototype.init=function(){var id="pb"+$(".ik_progressbar").length;this.element.attr({id:id,tabindex:-1,"aria-describedby":id+"_instructions"}).addClass("ik_progressbar").on("keydown.ik",{plugin:this},this.onKeyDown),this.fill=$("<div/>").addClass("ik_fill"),this.notification=$("<div/>").attr({"aria-role":"region","aria-live":"assertive","aria-atomic":"additions"}).addClass("ik_readersonly").appendTo(this.element),$("<div/>").text(this.options.instructions).addClass("ik_readersonly").attr({id:id+"_instructions","aria-hidden":"true"}).appendTo(this.element),$("<div/>").addClass("ik_track").append(this.fill).appendTo(this.element)},Plugin.prototype.onKeyDown=function(event){switch(event.keyCode){case ik_utils.keys.space:case ik_utils.keys.enter:event.preventDefault(),event.stopPropagation(),event.data.plugin.notify()}},Plugin.prototype.getValue=function(){var value;return value=Number(this.element.data("value")),parseInt(value)},Plugin.prototype.getPercent=function(){var percent=this.getValue()/this.options.max*100;return parseInt(percent)},Plugin.prototype.setValue=function(n){var $el,val;$el=$(this.element),n>=this.options.max?(val=this.options.max,$el.attr({tabindex:-1}),this.notification.text("Loading complete")):val=n,this.element.data({value:parseInt(val)}),this.updateDisplay()},Plugin.prototype.updateDisplay=function(){this.fill.css({transform:"scaleX("+this.getPercent()/100+")"})},Plugin.prototype.notify=function(){this.notification.text(this.getPercent()+"%")},Plugin.prototype.reset=function(){this.setValue(0),this.updateDisplay(),this.notify()},$.fn[pluginName]=function(options){return this.each(function(){$.data(this,pluginName)||$.data(this,pluginName,new Plugin(this,options))})}}(jQuery,window,document),function($,window,document,undefined){function Plugin(element,options){this._name=pluginName,this._defaults=defaults,this.element=$(element),this.options=$.extend({},defaults,options),this.init()}var pluginName="ik_slider",defaults={instructions:"Use left and right arrow keys to change the value by one increment, home and end keys to set value to minimum and maximum values correspondingly.",minValue:0,maxValue:100,nowValue:0,step:1};Plugin.prototype.init=function(){var id,plugin;if(plugin=this,id="slider"+$(".ik_slider").length,plugin.textfield=plugin.element,!plugin.textfield.is(":text"))throw plugin._name+" plugin must be used only with text input elements.";plugin.textfield.attr({readonly:"",tabindex:-1}).addClass("ik_value").wrap("<div></div>"),plugin.element=plugin.textfield.parent("div").addClass("ik_slider").on("mousedown",function(event){event.preventDefault()}).on("mouseleave",{plugin:plugin},plugin.onMouseUp),plugin.fill=$("<div/>").addClass("ik_fill"),plugin.knob=$("<div/>").attr({id:id,tabindex:0,role:"slider","aria-valuemin":plugin.options.minValue,"aria-valuemax":plugin.options.maxValue,"aria-valuenow":plugin.options.minValue,"aria-labelledby":id+"_instructions"}).addClass("ik_knob").on("keydown.ik",{plugin:plugin},plugin.onKeyDown).on("mousedown.ik",{plugin:plugin},plugin.onMouseDown).on("mousemove.ik",{plugin:plugin},plugin.onMouseMove).on("mouseup.ik",{plugin:plugin},plugin.onMouseUp).on("mouseleave.ik",function(){setTimeout(plugin.onMouseUp,100,{data:{plugin:plugin}})}),$("<div/>").attr({id:id+"_instructions"}).text(plugin.options.instructions).addClass("ik_readersonly").appendTo(this.element),$("<div/>").addClass("ik_track").append(this.fill,this.knob).prependTo(this.element),this.setValue(plugin.options.minValue)},Plugin.prototype.setValue=function(n){this.textfield.val(n),this.options.nowValue=n,this.knob.attr({"aria-valuenow":n}),this.updateDisplay(n)},Plugin.prototype.updateDisplay=function(n){var percent;percent=(n-this.options.minValue)/(this.options.maxValue-this.options.minValue),this.fill.css({transform:"scaleX("+percent+")"}),this.knob.css({left:100*percent+"%"})},Plugin.prototype.onKeyDown=function(event){var $elem,plugin,value;switch($elem=$(this),plugin=event.data.plugin,event.keyCode){case ik_utils.keys.right:value=parseInt($elem.attr("aria-valuenow"))+plugin.options.step,value=value<plugin.options.maxValue?value:plugin.options.maxValue,plugin.setValue(value);break;case ik_utils.keys.end:plugin.setValue(plugin.options.maxValue);break;case ik_utils.keys.left:value=parseInt($elem.attr("aria-valuenow"))-plugin.options.step,value=value>plugin.options.minValue?value:plugin.options.minValue,plugin.setValue(value);break;case ik_utils.keys.home:plugin.setValue(plugin.options.minValue)}},Plugin.prototype.onMouseDown=function(event){var plugin=event.data.plugin;plugin.dragging=!0,plugin.element.addClass("dragging"),plugin.knob.focus()},Plugin.prototype.onMouseMove=function(event){var plugin,$parent,min,max,step,value,percent,mod;event.preventDefault(),event.stopPropagation(),$me=$(this),$parent=$me.parent(),plugin=event.data.plugin,event.data.plugin.dragging&&(min=plugin.options.minValue,max=plugin.options.maxValue,step=plugin.options.step,percent=(event.pageX-$parent.offset().left)/$parent.width(),value=0>=percent?min:percent>=1?max:min+Math.floor((max-min)*percent),mod=(value-min)%step,step/1.5>mod?plugin.setValue(value-mod):plugin.setValue(value-mod+step),plugin.updateDisplay(value))},Plugin.prototype.onMouseUp=function(event){var plugin=event.data.plugin;plugin.dragging=!1,plugin.element.removeClass("dragging"),plugin.setValue(plugin.options.nowValue)},$.fn[pluginName]=function(options){return this.each(function(){$.data(this,pluginName)||$.data(this,pluginName,new Plugin(this,options))})}}(jQuery,window,document),function($,window,document,undefined){function Plugin(element,options){this.element=$(element),this.options=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,this.init()}var pluginName="ik_sortable",modifier=navigator.platform.indexOf("Mac")>-1?"Command":"Control",defaults={instructions:"Use arrow keys to select a list item,  "+modifier+" + arrow keys to move it to a new position."};Plugin.prototype.init=function(){var $elem,plugin,id,total;plugin=this,id="sortable_"+$(".ik_sortable").length,$elem=this.element.attr({role:"list",id:id,tabindex:0,"aria-labelledby":id+"_instructions"}).wrap('<div class="ik_sortable"></div>').before(plugin.temp),$("<div/>").text(plugin.options.instructions).addClass("ik_readersonly").attr({id:id+"_instructions","aria-hidden":"true"}).appendTo($elem),total=$elem.children("li").length,plugin.items=$elem.children("li").each(function(i,el){$(el).attr({role:"listitem",draggable:!0,"aria-label":$(el).text()+" "+(i+1)+" of "+total+" movable",id:id+"_"+i,tabindex:i>0?-1:0})}).on("dragstart",{plugin:plugin},plugin.onDragStart).on("drop",{plugin:plugin},plugin.onDrop).on("dragend",{plugin:plugin},plugin.onDragEnd).on("dragenter",{plugin:plugin},plugin.onDragEnter).on("dragover",{plugin:plugin},plugin.onDragOver).on("dragleave",{plugin:plugin},plugin.onDragLeave).on("keydown",{plugin:plugin},plugin.onKeyDown)},Plugin.prototype.onDragStart=function(event){var plugin,$me;plugin=event.data.plugin,event=event.originalEvent||event,$me=$(event.currentTarget),event.dataTransfer.effectAllowed="move",event.dataTransfer.setData("text",$me.attr("id"))},Plugin.prototype.onDrop=function(event){var source_id,$me;event=event.originalEvent||event,event.preventDefault(),event.stopPropagation(),$me=$(event.currentTarget),source_id=event.dataTransfer.getData("text"),source_id!=$me.attr("id")&&($me.hasClass("dropafter")?$me.after($("#"+source_id)):$me.before($("#"+source_id)))},Plugin.prototype.onDragEnd=function(event){var plugin;plugin=event.data.plugin,plugin.element.find(".dragover").removeClass("dragover")},Plugin.prototype.onDragEnter=function(event){$(event.currentTarget).addClass("dragover")},Plugin.prototype.onDragOver=function(event){var $me,y,h;event=event.originalEvent||event,event.preventDefault(),event.dataTransfer.dropEffect="move",$me=$(event.currentTarget),y=event.pageY-$me.offset().top,h=$me.outerHeight(),$me.toggleClass("dropafter",y>h/2)},Plugin.prototype.onDragLeave=function(event){$(event.currentTarget).removeClass("dragover")},Plugin.prototype.onKeyDown=function(event){var plugin,$me;switch(plugin=event.data.plugin,$me=$(event.currentTarget),currentIndex=plugin.items.index(event.currentTarget),event.keyCode){case ik_utils.keys.down:plugin.items.attr({tabindex:-1}),currentIndex<plugin.items.length-1&&(event.ctrlKey||event.metaKey?($me.insertAfter($me.next()),$me.attr({tabindex:0}).focus(),plugin.resetNumbering(plugin)):$me.next().attr({tabindex:0}).focus());break;case ik_utils.keys.up:plugin.items.attr({tanindex:-1}),currentIndex>0&&(event.ctrlKey||event.metaKey?($me.insertBefore($me.prev()),$me.attr({tabindex:0}).focus(),plugin.resetNumbering(plugin)):$me.prev().attr({tabindex:0}).focus())}},Plugin.prototype.resetNumbering=function(plugin){plugin.items=plugin.element.children("li"),plugin.items.each(function(i,el){var $me=$(el);$me.attr({"aria-label":$me.text()+" "+(i+1)+" of "+plugin.items.length+" movable"})})},$.fn[pluginName]=function(options){return this.each(function(){$.data(this,pluginName)||$.data(this,pluginName,new Plugin(this,options))})}}(jQuery,window,document),function($,window,document,undefined){function Plugin(element,options){this.element=$(element),this.options=$.extend({},defaults,options),this._defaults=defaults,this._name=pluginName,this.init()}var pluginName="ik_suggest",defaults={instructions:"As you start typing the application might suggest similar search terms. Use up and down arrow keys to select a suggested search string.",minLength:2,maxResults:10,source:[]};Plugin.prototype.init=function(){var $elem,plugin;plugin=this,plugin.notify=$("<div/>").addClass("ik_readersonly").attr({role:"region","aria-live":"polite"}),$elem=plugin.element.attr({autocomplete:"off"}).wrap('<span class="ik_suggest"></span>').on("focus",{plugin:plugin},plugin.onFocus).on("keydown",{plugin:plugin},plugin.onKeyDown).on("keyup",{plugin:plugin},plugin.onKeyUp).on("focusout",{plugin:plugin},plugin.onFocusOut),plugin.list=$("<ul/>").addClass("suggestions"),$elem.after(plugin.notify,plugin.list)},Plugin.prototype.onFocus=function(event){var plugin;plugin=event.data.plugin,plugin.notify.text(plugin.options.instructions)},Plugin.prototype.onKeyDown=function(event){var plugin,selected;switch(plugin=event.data.plugin,event.keyCode){case ik_utils.keys.tab:case ik_utils.keys.esc:plugin.list.empty().hide();break;case ik_utils.keys.enter:selected=plugin.list.find(".selected"),plugin.element.val(selected.text()),plugin.list.empty().hide()}},Plugin.prototype.onKeyUp=function(event){var plugin,$me,suggestions,selected,msg;switch(plugin=event.data.plugin,$me=$(event.currentTarget),event.keyCode){case ik_utils.keys.down:selected=plugin.list.find(".selected"),msg=selected.length?selected.removeClass("selected").next().addClass("selected").text():plugin.list.find("li:first").addClass("selected").text(),plugin.notify.text(msg);break;case ik_utils.keys.up:selected=plugin.list.find(".selected"),selected.length&&(msg=selected.removeClass("selected").prev().addClass("selected").text()),plugin.notify.text(msg);break;default:if(plugin.list.empty(),suggestions=plugin.getSuggestions(plugin.options.source,$me.val()),suggestions.length>1){for(var i=0,l=suggestions.length;l>i;i++)$("<li/>").html(suggestions[i]).on("click",{plugin:plugin},plugin.onOptionClick).appendTo(plugin.list);plugin.list.show()}else plugin.list.hide()}},Plugin.prototype.onFocusOut=function(event){var plugin=event.data.plugin;setTimeout(function(){plugin.list.empty().hide()},200)},Plugin.prototype.onOptionClick=function(event){var plugin,$option;event.preventDefault(),event.stopPropagation(),plugin=event.data.plugin,$option=$(event.currentTarget),plugin.element.val($option.text()),plugin.list.empty().hide()},Plugin.prototype.getSuggestions=function(arr,str){var r,pattern,regex,len,limit;if(r=[],pattern="(\\b"+str+")",regex=new RegExp(pattern,"gi"),len=this.options.minLength,limit=this.options.maxResults,str.length>=len)for(var i=0,l=arr.length;l>i&&!(r.length>limit);i++)regex.test(arr[i])&&r.push(arr[i].replace(regex,"<span>$1</span>"));return r.length>1&&this.notify.text("Suggestions are available for this field. Use up and down arrows to select a suggestion and enter key to use it."),r},$.fn[pluginName]=function(options){return this.each(function(){$.data(this,pluginName)||$.data(this,pluginName,new Plugin(this,options))})}}(jQuery,window,document),function($,window,document,undefined){function Plugin(element,options){this._name=pluginName,this._defaults=defaults,this.element=$(element),this.options=$.extend({},defaults,options),this.init()}var pluginName="ik_tabs",defaults={tabLocation:"top",selectedIndex:0};Plugin.prototype.init=function(){var id,$elem,$tabbar;plugin=this,id="tabs"+$(".ik_tabs").length,$elem=this.element.addClass("ik_tabs"),$tabbar=$("<ul/>").addClass("ik_tabbar cf").attr({role:"tablist"}).prependTo($elem),plugin.panels=$elem.children("div").each(function(i,el){var $tab,$panel,lbl;$panel=$(el).attr({id:id+"_panel"+i,role:"tabpanel","aria-hidden":!0,tabindex:0}).addClass("ik_tabpanel").hide(),lbl=$panel.attr("title"),$panel.removeAttr("title"),$tab=$("<li/>").attr({id:id+"_tab"+i,role:"tab","aria-controls":"panel"+i}).text(lbl>""?lbl:"Tab "+(i+1)).on("keydown",{plugin:plugin,index:i},plugin.onKeyDown).on("click",{plugin:plugin,index:i},plugin.selectTab).appendTo($tabbar)}),plugin.tabs=$tabbar.find("li"),plugin.selectTab({data:{plugin:plugin,index:plugin.options.selectedIndex}})},Plugin.prototype.selectTab=function(event){var $tabs,$panels,plugin=event.data.plugin,ind=event.data.index;$elem=plugin.element,$tabs=plugin.tabs,$panels=plugin.panels,$tabs.removeClass("selected").attr({"aria-selected":!1,tabindex:-1}).blur(),$($tabs[ind]).addClass("selected").attr({"aria-selected":!0,tabindex:0}).focus(),event.type&&$($tabs[ind]).focus(),$panels.attr({"aria-hidden":!0}).hide(),$($panels[ind]).attr({"aria-hidden":!1}).show()},Plugin.prototype.onKeyDown=function(event){var $tabs,$panels,next,plugin=event.data.plugin,ind=event.data.index;switch($elem=plugin.element,$tabs=plugin.tabs,$panels=plugin.panels,event.keyCode){case ik_utils.keys.left:next=ind>0?--ind:0,plugin.selectTab({data:{plugin:plugin,index:next}});break;case ik_utils.keys.home:next=0,plugin.selectTab({data:{plugin:plugin,index:next}});break;case ik_utils.keys.right:next=ind<$tabs.length-1?++ind:$tabs.length-1,plugin.selectTab({data:{plugin:plugin,index:next}});break;case ik_utils.keys.end:next=$tabs.length-1,plugin.selectTab({data:{plugin:plugin,index:next}});break;case ik_utils.keys.space:return event.preventDefault(),event.stopPropagation(),!1}},$.fn[pluginName]=function(options){return this.each(function(){$.data(this,pluginName)||$.data(this,pluginName,new Plugin(this,options))})}}(jQuery,window,document),function($,window,document,undefined){function Plugin(element,options){this._name=pluginName,this._defaults=defaults,this.element=$(element),this.options=$.extend({},defaults,options),this.init()}var pluginName="ik_tooltip",defaults={position:"top"};Plugin.prototype.init=function(){var id,$elem,$tooltip,tip;id="tip"+$(".ik_tooltip").length,$elem=this.element,tip=$elem.attr("title"),tip.length>0&&($tooltip=$("<span/>").text(tip).addClass("ik_tooltip").attr({id:id,role:"tooltip","aria-hidden":"true","aria-live":"polite"}),$elem.attr({tabindex:0}).css("position","relative").removeAttr("title").after($tooltip).on("mouseover focus",function(event){var y,x;y=$elem.position().top-$tooltip.height()-20,x=$elem.position().left,$elem.is(":focus")||$(":focus").blur(),$(".ik_tooltip").removeClass("mouseover"),"mouseover"===event.type&&$tooltip.addClass("mouseover"),$tooltip.attr({"aria-hidden":"false"}).css({top:y,left:x}).addClass("visible")}).on("mouseout",function(event){$(event.currentTarget).is(":focus")||$tooltip.attr({"aria-hidden":"true"}).removeClass("visible mouseover")}).on("blur",function(event){$tooltip.hasClass("mouseover")||$tooltip.attr({"aria-hidden":"true"}).removeClass("visible")}).on("keyup",function(event){event.keyCode==ik_utils.keys.esc&&$tooltip.attr({"aria-hidden":"true"}).removeClass("visible")}))},$.fn[pluginName]=function(options){return this.each(function(){$.data(this,pluginName)||$.data(this,pluginName,new Plugin(this,options))})}}(jQuery,window,document),function($,window,document,undefined){function Plugin(element,options){this._name=pluginName,this._defaults=defaults,this.element=$(element),this.options=$.extend({},defaults,options),this.init()}var pluginName="ik_treemenu",defaults={instructions:"Use up or down arrows to move through menu items, and Enter or Spacebar to toggle submenus open and closed.",menuTitle:"Breakfast Menu",expandAll:!0};Plugin.prototype.init=function(){var id,$elem,plugin;plugin=this,$elem=plugin.element,id="tree"+$(".ik_treemenu").length,$elem.addClass("ik_treemenu").attr({tabindex:0,"aria-labelledby":id+"_instructions"}),$("<div/>").text(plugin.options.instructions).addClass("ik_readersonly").attr({id:id+"_instructions","aria-hidden":"true"}).appendTo($elem),$("<div/>").addClass("title").text(this.options.menuTitle).attr({id:id+"_title"}).prependTo($elem),$elem.find("ul:first").attr({id:id,role:"tree","aria-labelledby":id+"_title"}),$elem.find("li").css({"list-style":"none"}).each(function(i,el){var $me;$me=$(el),$me.attr({id:id+"_menuitem_"+i,role:"treeitem",tabindex:-1,"aria-level":$me.parents("ul").length,"aria-setsize":$me.siblings().length+1,"aria-posinset":$me.parent().children().index($me)+1}),$($me.contents()[0]).wrap("<span></span>"),$me.children("ul").length?(plugin.options.expandAll?$me.attr({"aria-expanded":!0}):$me.attr({"aria-expanded":!1}).addClass("collapsed"),$me.attr({"aria-label":$me.children("span:first").text()}).children("span").addClass("folder").attr({role:"presentation"})):$me.attr({"aria-selected":!1})}).on("click",{plugin:plugin},plugin.onClick).on("keydown",{plugin:plugin},plugin.onKeyDown),$elem.find("li:first").attr({tabindex:0})},Plugin.prototype.selectItem=function($item,plugin){var $elem=plugin.element;$elem.find("[aria-selected=true]").attr({tabindex:-1,"aria-selected":!1}),$elem.find(".focused").removeClass("focused"),$elem.find("li").attr({tabindex:-1}),$item.attr({tabindex:0,"aria-selected":!0}),$item.children("ul").length?$item.children("span").addClass("focused"):$item.addClass("focused"),$item.focus()},Plugin.prototype.toggleSubmenu=function($item){$item.children("ul").length&&($item.hasClass("collapsed")?$item.attr({"aria-expanded":!0}).removeClass("collapsed"):$item.attr({"aria-expanded":!1}).addClass("collapsed"))},Plugin.prototype.onMouseOver=function(event){var plugin=event.data.plugin,$me=$(event.currentTarget);event.stopPropagation(),plugin.element.find(".mouseover").removeClass("mouseover"),$me.children("span").addClass("mouseover")},Plugin.prototype.onClick=function(event){var plugin=event.data.plugin,$me=$(event.currentTarget);event.preventDefault(),event.stopPropagation(),plugin.toggleSubmenu($me),plugin.selectItem($me,plugin)},Plugin.prototype.onKeyDown=function(event){var plugin,$elem,$me,$visibleitems,newindex;switch(plugin=event.data.plugin,$elem=plugin.element,$me=$(event.currentTarget),event.keyCode){case ik_utils.keys.down:event.preventDefault(),event.stopPropagation(),$visibleitems=$elem.find("[role=treeitem]:visible"),newindex=$visibleitems.index($me)+1,newindex<$visibleitems.length&&plugin.selectItem($($visibleitems[newindex]),plugin);break;case ik_utils.keys.up:event.preventDefault(),event.stopPropagation(),$visibleitems=$elem.find("[role=treeitem]:visible"),newindex=$visibleitems.index($me)-1,newindex>-1&&plugin.selectItem($($visibleitems[newindex]),plugin);break;case ik_utils.keys.right:event.preventDefault(),event.stopPropagation(),"false"==$me.attr("aria-expanded")&&plugin.toggleSubmenu($me);break;case ik_utils.keys.left:event.preventDefault(),event.stopPropagation(),"true"==$me.attr("aria-expanded")&&plugin.toggleSubmenu($me);break;case ik_utils.keys.enter:case ik_utils.keys.space:return event.preventDefault(),event.stopPropagation(),plugin.toggleSubmenu($me),!1}},$.fn[pluginName]=function(options){return this.each(function(){$.data(this,pluginName)||$.data(this,pluginName,new Plugin(this,options))})}}(jQuery,window,document),function($,window,document,undefined){function Plugin(element,options){this._name=pluginName,this._defaults=defaults,this.element=$(element),this.options=$.extend({},defaults,options),this.init()}var pluginName="ik_menu",defaults={instructions:"Use arrow keys to navigate between menuitems, spacebar to expand submenus, escape key to close submenus, enter to activate menuitems."};Plugin.prototype.init=function(){var id,$elem,plugin;plugin=this,id="menu"+$(".ik_menu").length,$elem=plugin.element,$elem.addClass("ik_menu").attr({id:id}),$("<div/>").text(plugin.options.instructions).addClass("ik_readersonly").attr({id:id+"_instructions","aria-hidden":"true"}).appendTo(this.element),$elem.find("ul:eq(0)").attr({id:id,role:"menubar",tabindex:0,"aria-labelledby":id+"_instructions"}),$elem.find("li>ul").attr({role:"menu","aria-hidden":!0}),plugin.menuitems=$elem.find("li").css({"list-style":"none"}).each(function(i,el){var $me,$link;$me=$(this),$link=$me.find(">a").attr({tabindex:-1,"aria-hidden":!0}),$me.attr({role:"menuitem",tabindex:-1,"aria-label":$link.text()}),$me.has("ul").attr({"aria-haspopup":!0,"aria-expanded":!1}).addClass("expandable")}),plugin.selected=plugin.menuitems.find(".selected").attr({tabindex:0,"aria-selected":!0}),plugin.selected.length?plugin.selected.parentsUntil("nav","li").attr({tabindex:0}):plugin.menuitems.eq(0).attr({tabindex:0}),plugin.menuitems.on("mouseenter",plugin.showSubmenu).on("mouseleave",plugin.hideSubmenu).on("click",{plugin:plugin},plugin.activateMenuItem).on("keydown",{plugin:plugin},plugin.onKeyDown),$(window).on("resize",function(){plugin.collapseAll(plugin)})},Plugin.prototype.showSubmenu=function(event){var $elem,$submenu;$elem=$(event.currentTarget),$submenu=$elem.children("ul"),$submenu.length&&($elem.addClass("expanded").attr({"aria-expanded":!0,tabindex:-1}),$submenu.attr({"aria-hidden":!1}))},Plugin.prototype.hideSubmenu=function(event){var $elem,$submenu;$elem=$(event.currentTarget),$submenu=$elem.children("ul"),$submenu.length&&($elem.removeClass("expanded").attr({"aria-expanded":!1}),$submenu.attr({"aria-hidden":!0}),$submenu.children("li").attr({tabindex:-1}))},Plugin.prototype.collapseAll=function(plugin,$elem){$elem=$elem||plugin.element,$elem.find("[aria-hidden=false]").attr({"aria-hidden":!0}),$elem.find(".expanded").removeClass("expanded").attr({"aria-expanded":!1}),$elem.find("li").attr({tabindex:-1}).eq(0).attr({tabindex:0})},Plugin.prototype.activateMenuItem=function(event){var plugin,$elem;event.stopPropagation(),plugin=event.data.plugin,$elem=$(event.currentTarget),plugin.collapseAll(plugin),$elem.has("a").length&&alert("Menu item "+$elem.find(">a").text()+" selected")},Plugin.prototype.onKeyDown=function(event){var plugin,$elem,$current,$submenu;switch(plugin=event.data.plugin,$elem=$(plugin.element),$current=$(plugin.element).find(":focus"),$submenu=$current.children("ul"),$parentmenu=$($current.parent("ul")),$parentitem=$parentmenu.parent("li"),event.keyCode){case ik_utils.keys.right:event.preventDefault(),1==$current.parents("ul").length&&$current.attr({tabindex:-1}).next("li").attr({tabindex:0}).focus();break;case ik_utils.keys.left:event.preventDefault(),1==$current.parents("ul").length&&$current.attr({tabindex:-1}).prev("li").attr({tabindex:0}).focus();break;case ik_utils.keys.up:event.preventDefault(),event.stopPropagation(),$current.parents("ul").length>1&&$current.attr({tabindex:-1}).prev("li").attr({tabindex:0}).focus();break;case ik_utils.keys.down:event.preventDefault(),event.stopPropagation(),$current.parents("ul").length>1&&$current.attr({tabindex:-1}).next("li").attr({tabindex:0}).focus();break;case ik_utils.keys.space:event.preventDefault(),event.stopPropagation(),$submenu.length&&(plugin.showSubmenu(event),$submenu.children("li:eq(0)").attr({tabindex:0}).focus());break;case ik_utils.keys.esc:event.stopPropagation(),$parentitem.hasClass("expandable")&&($parentitem.removeClass("expanded").attr({tabindex:0,"aria-expanded":!1}).focus(),plugin.collapseAll(plugin,$parentitem));break;case ik_utils.keys.enter:plugin.activateMenuItem(event);break;case ik_utils.keys.tab:plugin.collapseAll(plugin)}},$.fn[pluginName]=function(options){return this.each(function(){$.data(this,pluginName)||$.data(this,pluginName,new Plugin(this,options))})}}(jQuery,window,document),function($,window,document,undefined){function Plugin(element,options){this._name=pluginName,this._defaults=defaults,this.element=$(element),this.options=$.extend({},defaults,options),this.init()}var pluginName="ik_togglebutton",defaults={label:"toggle button",isPressed:!1,onToggle:function(){}};Plugin.prototype.init=function(){var plugin,id,$elem;plugin=this,id="toggle"+$(".ik_togglebutton").length,$elem=this.element.attr({id:id,tabindex:0,role:"button","aria-label":plugin.options.label,
"aria-pressed":!1}),plugin.options.onToggle=plugin.options.onToggle.bind(plugin),$elem.on("click",{plugin:plugin},plugin.onActivate).on("keydown",{plugin:plugin},plugin.onActivate)},Plugin.prototype.onActivate=function(event){var plugin,$me;("click"===event.type||event.keyCode===ik_utils.keys.enter||event.keyCode===ik_utils.keys.space)&&(event.stopPropagation(),plugin=event.data.plugin,$me=plugin.element,plugin.options.isPressed?($me.removeClass("pressed").attr({"aria-pressed":!1}),plugin.options.isPressed=!1):($me.addClass("pressed").attr({"aria-pressed":!0}),plugin.options.isPressed=!0),plugin.options.onToggle())},$.fn[pluginName]=function(options){return this.each(function(){$.data(this,pluginName)||$.data(this,pluginName,new Plugin(this,options))})}}(jQuery,window,document);